package com.simple.bootbasic.controller;

import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RestController;

import com.simple.bootbasic.command.SimpleVO;

@RestController //완전히 다른 방식으로 컨트롤러 역할
public class RestBasicController {

	
	//@ResponseBody //생략...
	//consumer : 반드시 이 타입으로 데이터를 보내라
	//producer : 제공되는 데이터 타입은 이 타입으로 보낼게 (default: json)
	@GetMapping(value = "/text" /*, produces = "text/plain"*/)
	public String text() {
		
		return "hello world"; //??
	}
	
	//객체를 반환하는 모형
	//Jackson-databind 모듈이 자동으로 형변환을 시켜서 반환
	//보내는 형식의 데이터 json
	@GetMapping(value = "/getObject", produces = "application/json")
	public SimpleVO getObject() {
		
		SimpleVO vo = new SimpleVO(10, "홍", "길동", LocalDateTime.now());
		
		return vo;
	}
	
	//맵타입의 반환
	@GetMapping("/getObject2")
	public Map<String, Object> getObject2() {
		
		Map<String, Object> map = new HashMap<>();
		map.put("data", new SimpleVO(10, "홍", "길동", LocalDateTime.now()) );
		
		return map;
	}
	
	//리스트타입의 반환
	@GetMapping("/getObject3")
	public List<SimpleVO> getObject3() {
		
		List<SimpleVO> list = new ArrayList<>();
		list.add( new SimpleVO(1, "홍", "길동", LocalDateTime.now()) );
		list.add( new SimpleVO(2, "이", "순신", LocalDateTime.now()) );

		return list;
	}
	
	////////////////get방식으로 데이터를 받는 방법///////////////
	@GetMapping("/getData")
	public SimpleVO getData(@RequestParam("key") String key,
							@RequestParam("bno") int bno) {
		
		System.out.println("받은데이터:");
		System.out.println(key);
		System.out.println(bno);
		
		return null;
	}
	
	
	
	
	
	
	
	
}
